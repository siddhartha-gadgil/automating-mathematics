<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><script src="/automating-mathematics/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=automating-mathematics/livereload" data-no-instant defer></script>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.123.7">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>LeanAide: AI for Lean &amp; Mathematics &middot; Artificial Intelligence and Mathematics</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="http://localhost:1313/automating-mathematics/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="http://localhost:1313/automating-mathematics/css/poole.css">
  <link type="text/css" rel="stylesheet" href="http://localhost:1313/automating-mathematics/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="http://localhost:1313/automating-mathematics/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:1313/automating-mathematics/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="http://localhost:1313/automating-mathematics/favicon.png">

  
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZRWGMDYZ53"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZRWGMDYZ53');
</script>
  

<link rel="icon" href="http://localhost:1313/automating-mathematics/IIScLogo.jpg">

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      displayMath: [ ['$$', '$$']],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea']
    },
    TeX: {
      Macros: {
        R: '\\mathbb{R}',
        Z: '\\mathbb{Z}',
        C: '\\mathbb{C}'
      }
    },
    messageStyle: "none",
    "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
    });

    </script>

<link rel="stylesheet" href="http://localhost:1313/automating-mathematics/css/vs.min.css">
<link rel="stylesheet" href="http://localhost:1313/automating-mathematics/css/custom.css">
<script type="text/javascript" src="http://localhost:1313/automating-mathematics/js/highlight.min.js"></script>
<script type="text/javascript" charset="UTF-8" src="http://localhost:1313/automating-mathematics/js/lean.min.js"></script>
<script type="text/javascript">
  hljs.highlightAll();
</script>
<style>
  .sidebar-about h1 {
    font-size: 2.6rem !important;
  }
</style>
</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://localhost:1313/automating-mathematics/"><h1>Artificial Intelligence and Mathematics</h1></a>
      <p class="lead">
       My experiments in automating mathematics. 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="http://localhost:1313/automating-mathematics/">Home</a> </li>
        <li><a href="http://math.iisc.ac.in/~gadgil"> Siddhartha Gadgil&#39;s homepage </a></li><li><a href="https://siddhartha-gadgil.github.io/automating-mathematics/automating-mathematics-india/"> Automating Mathematics group </a></li><li><a href="https://github.com/siddhartha-gadgil/leanaide/"> LeanAide </a></li><li><a href="https://github.com/siddhartha-gadgil/ProvingGround/"> ProvingGround </a></li><li><a href="https://github.com/siddhartha-gadgil/Superficial/"> Superficial </a></li>
      </ul>
    </nav>

    <p>&copy; 2025. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>LeanAide: AI for Lean &amp; Mathematics</h1>
  <time datetime=2025-02-08T13:41:12Z class="post-date">Sat, Feb 8, 2025</time>
  <p>LeanAide or LeanAIde (accidental pun) is work (in progress) to build AI based tools to work with the Lean Theorem Prover. Our goal is to build tools for:</p>
<ul>
<li>Users of the Lean Prover by using AI tools.</li>
<li>Mathematicians to use both Lean and AI. The role of Lean for mathematicians whose goal is not formalizing, but discovery is:
<ul>
<li>To filter out incorrect statements from models, and even give feedback on errors and missing details.</li>
<li>To <strong>organize</strong> mathematics as it develops. Mathematical discovery is not simply answering a question but involves decomposition of problems, experimentation etc. Lean facilitates <em>accumulating</em> mathematical knowledge in a <em>modular</em> fashion.</li>
</ul>
</li>
</ul>
<p>The core technique we use is <strong>Autoformalization</strong> which is translating informal mathematical statements to formal statements in a proof assistant (Lean Prover in our case). This is used both directly to provide tools and indirectly to generate proofs by translation from natural language proofs generated by Large Language models.</p>
<p>I spoke about LeanAide in a Lecture at <a href="https://www.youtube.com/watch?v=bTueWi6OdSg&amp;list=PLlF-CfQhukNlzXdQvu1SVt9vcD4--fLlg&amp;index=10">Lean Together 2025</a>. Since then, we have managed to finish two significant steps:</p>
<ul>
<li>Change of design to a Server-Client model.
<ul>
<li>This means that LeanAide is actually not hard to use in a Lean project.</li>
<li>Further, this opens the way to use the server with a different client, including where Lean is kept completely in the background for uses in mathematical education and research.</li>
</ul>
</li>
<li>A skeleton of larger-scale autoformalization code, done in what seems a correct and extendable way.
<ul>
<li>We need to build on this by testing, finding limitations and errors, fixing and expanding etc.</li>
<li>The code works at a single theorem and proof level. We need to scale up further.</li>
<li>However, scaling from the basic code one hopes is just a matter of work and will not face fundamental difficulties.</li>
</ul>
</li>
</ul>
<p>The rest of this blog is an introduction to LeanAide. It was drafted (almost single-shot) from my lecture linked above by <code>Gemini Flash 2.0-experimental-thinking with apps</code>. I had to fix some errors, but most of the writing was done for me.</p>
<h2 id="leanaide-bridging-the-gap-between-natural-language-and-formal-mathematics-with-ai">LeanAide: Bridging the Gap Between Natural Language and Formal Mathematics with AI</h2>
<p><strong>LeanAide</strong> is a system I&rsquo;ve developed (with collaborators) to explore how AI can make formalizing mathematics in Lean more accessible and efficient.  My goal isn&rsquo;t just full automation of formalization, but to create a practical and interactive environment where AI can assist mathematicians at every stage. This assistance ranges from helping beginners learn Lean syntax to supporting experts in tackling complex mathematical formalization.</p>
<p><strong>What is LeanAide?</strong></p>
<p>LeanAide is an AI-powered system that aims to make formalizing mathematics in Lean more approachable and more productive.  It&rsquo;s built around the idea of <strong>pragmatic autoformalization</strong>.  This means we focus on the practical usefulness of AI in translating natural language mathematics into Lean code.  Rather than solely aiming for perfect automated translation accuracy, we prioritize creating tools that are genuinely helpful and interactive for users throughout the formalization process.</p>
<p><strong>How Does LeanAide Work?</strong></p>
<p>LeanAide uses AI, specifically <code>GPT 4o</code>, to connect the way mathematicians naturally express themselves with the rigorous formal language of Lean. The user can use a different model in place of <code>GPT-4o</code>. Here are the core functionalities of our system:</p>
<ul>
<li>
<p><strong>Deep Integration with Lean:</strong> LeanAide is deeply integrated with Lean using Meta-programming. This is both used to improve the quality of translation and usability of the tools.</p>
</li>
<li>
<p><strong>Natural Language to Lean Code Translation:</strong> LeanAide includes tools that translate theorem statements and definitions written in natural language into Lean code, and convenient syntax <code>#theorem</code> and <code>#def</code> to use the tools.  This is designed to be helpful for those new to Lean syntax and for more experienced users who want a quick way to translate mathematical ideas into code.</p>
</li>
<li>
<p><strong>Automated Documentation:</strong>  Our system can automatically generate docstrings for Lean code. This improves the readability and makes the code easier to maintain.</p>
</li>
<li>
<p><strong>Mathlib Integration:</strong> LeanAide is integrated with Lean&rsquo;s mathlib (mathematical library). It uses mathlib to find relevant documentation strings and examples. This context helps improve the quality of translations by giving the AI model relevant examples to draw from.</p>
</li>
<li>
<p><strong>Prompting and Post-processing with <code>GPT 4o</code>:</strong> We use <code>GPT 4o</code> for translations, with a focus on creating effective prompts and using post-processing techniques to refine the output.  Instead of fine-tuning models, we emphasize carefully designed prompts and filters to ensure that only valid Lean code is produced.  Invalid code responses are discarded.</p>
</li>
<li>
<p><strong>Iterative Refinement:</strong> LeanAide uses elaboration filters, manages language model &ldquo;chattiness,&rdquo; and includes autocorrections to improve the accuracy and reliability of the AI-generated code.  It also groups responses and uses Lean&rsquo;s <code>aesop</code> tactic to check for equivalent outputs and select the most suitable translation.</p>
</li>
<li>
<p><strong>Informalization for Training Data Generation:</strong> LeanAide can translate formal theorems back into natural language (&ldquo;informalization&rdquo;).  This process is useful for creating more training data, which in turn helps improve the system&rsquo;s translation capabilities.</p>
</li>
<li>
<p><strong>Handling Ambiguity and Missing Definitions:</strong>  LeanAide incorporates methods to address missing definitions, logical inconsistencies, and ambiguous syntax. This makes it more capable of handling the nuances of real-world mathematical language.</p>
</li>
<li>
<p><strong>Iterative Formalization for Complex Tasks:</strong> For larger, more complex formalization projects, LeanAide uses an iterative approach.  Proofs are broken down into smaller, more manageable parts. Language models assist in proving each part, and these proofs are then translated into a structured JSON format before being autoformalized into Lean code. Rule-based tactics are then used to complete the proofs.</p>
</li>
</ul>
<p><strong>How LeanAide Helps with Lean and Mathematics:</strong></p>
<p>LeanAide offers several advantages for Lean users and the broader field of mathematics:</p>
<ul>
<li><strong>Easier Entry to Lean:</strong> By offering tools for translating natural language to Lean code and providing interactive assistance, LeanAide aims to make Lean more accessible for newcomers. It can help new users learn Lean syntax and understand mathematical terminology within the context of formalization.</li>
<li><strong>Faster Formalization Process:</strong> For those already familiar with Lean, LeanAide can speed up the formalization process. It can provide initial translations, automate documentation, and assist with breaking down complex proofs. This allows mathematicians to concentrate on the higher-level aspects of reasoning and problem-solving.</li>
<li><strong>Draft formalizations</strong> LeanAide can generate initial draft translations that can then be reviewed and refined, similar to successful methods used in past porting efforts from Lean 3 to Lean 4.</li>
<li><strong>Connecting Informal and Formal Mathematics:</strong> LeanAide aims to create a better connection between how mathematicians naturally think and write mathematics and the formal reasoning required by interactive theorem provers. This can make the formalization process feel more natural and intuitive.</li>
<li><strong>Potential for Mathematical Exploration:</strong>  I believe that Lean, enhanced by AI tools like LeanAide, can become not just a tool for formalization but also for mathematical exploration. By making formalization more efficient and accessible, LeanAide can empower mathematicians to explore and develop new mathematical ideas within a rigorous and verifiable framework.</li>
</ul>
<p><strong>Future Directions:</strong></p>
<p>The development of LeanAide is ongoing.  Our future work will focus on:</p>
<ul>
<li><strong>Improving the quality of code generation and translation</strong> at both the sentence and proof levels.</li>
<li><strong>Improving the user experience and making the system easier to install and use.</strong></li>
<li><strong>Exploring how to scale up autoformalization to handle entire mathematical documents.</strong></li>
</ul>
<p>As mentioned at the beginning of this post, the second of this is I believe done and there has been some progress on the third, including a key step.</p>
<p>LeanAide is a step towards integrating AI more deeply into mathematical workflows. By concentrating on practical tools and interactive assistance, we hope to make Lean more accessible and efficient, and ultimately, a more powerful tool for mathematical work. As both Lean and AI continue to evolve, systems like LeanAide may help to create a future where mathematicians can more easily combine informal and formal methods to advance mathematical understanding.</p>

</div>


    </main>

    
  </body>
</html>
